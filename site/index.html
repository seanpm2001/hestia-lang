<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>hestia, programming language</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
  </head>
  <body>
    <div id="container">
      <h1>hestia, a programming language<br>that feels like home</h1>
      <img src="fire.png" id="fire"></img>
      <p><b>hestia</b> (pronounced <b><i>HES-ti-a</i></b> or <b><i>es-TI-a</i></b>) is a small, functional, dynamically typed programming language designed for writing small scripts. It can be learned in an afternoon, but is not especially fast or especially general-purpose. Hestia is written in Rust and is <a href="https://github.com/semaj/hestia-lang/tree/main/lib/src">free and open source</a> under the MIT license.</p>
      <p><b>Current Features:</b>
        <ul>
          <li>A REPL</li>
          <li>Immutable-only data structures</li>
          <li>Simple syntax and control flow (no loops, recursion only)</li>
          <li>No user-defined types</li>
          <li>No macros</li>
          <li>Automatic function currying</li>
        </ul>
      </p>
      <p><b>Planned features:</b>
        <ul>
          <li>A fully-featured, smarter REPL</li>
          <li>Readable, batteries-included standard library</li>
          <li>First-class regular expressions</li>
          <li>Embeddability (in Rust)</li>
          <li>Extensibility (Rust libraries)</li>
          <li>First-class debugger (like Ruby's pry)</li>
        </ul>
      </p>
      <h2>try it!</h2>
      <p>Below is a Hestia REPL running in the browser via WebAssembly. <br>Try <code>(add 1 2)</code> or <code>(lmap (add 1) [1 2 3])</code>.</p>
      <div id="repl">
        <span id="result"></span>
        <span id="prompt">hestia&#62;</span>
        <input id="prompt-input"></input>
      </div>
      <h2>example code</h2>
      <pre>
      <code class="language-lisp">
# this is a comment
(def a-list [1 2 3]) # a global value
(def square { |x| (mul x x) }) # a global function
(def square-and-sum { |list|
  (let ([squared (lmap square list)]) # a local binding
     (lreduce 0 add squared))})
(square-and-sum a-list) # evaluates to `14`

(def a-map {a: 1, b: 2, c: 3})
(eq? a-map (insert 'c 3 {a: 1 b: 2})) # evalutes to `true`

(>> 1 (add 1) (add 2) (mul 3)) # evalutes to `12`
      </code>
      </pre>
    </div>
  </body>
  <link rel="stylesheet" href="default.min.css">
  <script src="highlight.min.js"></script>
  <script src="lisp.min.js"></script>
  <script>hljs.highlightAll();</script>
  <script type="module">
    import init, { ev } from "./pkg/hestia_site.js";
    var history = [];
    var index = 0;
    init().then(() => {
    });
    document.getElementById("prompt-input")
      .addEventListener("keyup", function(event) {
        event.preventDefault();
        if (event.keyCode === 13) {
            let inputValue = document.getElementById("prompt-input").value;
            let result = ev(inputValue);
            history.push(`hestia> ${inputValue}\n=> ${result}\n`); index++; document.getElementById("result").innerText = history.join("");
            var element = document.getElementById("repl");
            element.scrollTop = element.scrollHeight;
            document.getElementById("prompt-input").value = "";
        }
        // if (event.keyCode === 38) { // up
        //   if (index > 0) {
        //     document.getElementById("prompt-input").value = history.
        //   }
        // }
    });
  </script>
  <style>
    html {
      background: #E9F8F9;
      color: #181823;
    }
    h1 {
      text-align: center;
    }
    h1, h2 , h3, h4 {
      background: #C0EEF2;
      padding: 10px 10px 10px 10px;
      border-radius: 10px;
    }
    #container {
      font-family: sans-serif;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }
    #repl {
      color: #E9F8F9;
      padding: 1%;
      background: #537FE7;
      font-family: monospace;
      height: 200px;
      overflow-y:auto;
      flex-direction: column-reverse;
      border-radius: 10px;
    }
    #prompt-input {
    color: #E9F8F9;
      background: #537FE7;
      font-family: monospace;
      width: 90%;
    }
    input {
      border: none;
    }
    textarea:focus, input:focus{
      outline: none;
    }
    #fire {
      margin-left: auto;
      margin-right: auto;
      text-align: center;
      display: block;
      padding-bottom: 10px;
      padding-left: 3px;
      border-style: solid;
      border-radius: 50%;
      border-color: #181823;
    }

  </style>
</html>

